<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Biergarten | Contagem Softs</title>

<style>
:root{
  --amarelo:#F4C430;
  --preto:#1a1a1a;
  --preto80:#262626;
  --borda:#444;
}

body{
  background:var(--preto);
  color:#fff;
  font-family:Arial, sans-serif;
  padding:20px;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

header h1{ color:var(--amarelo); margin:0; }

header a{
  background:var(--amarelo);
  color:#000;
  padding:8px 12px;
  border-radius:6px;
  text-decoration:none;
  font-weight:bold;
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:12px;
}

th, td{
  border:1px solid var(--borda);
  padding:6px;
  text-align:center;
}

th{
  background:var(--amarelo);
  color:#000;
}

td.nome{
  text-align:left;
  font-weight:bold;
}

button{
  background:var(--amarelo);
  border:none;
  padding:4px 8px;
  border-radius:4px;
  cursor:pointer;
  font-weight:bold;
}

.acoes{
  display:flex;
  gap:4px;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
}

input[type=number]{
  background:#333;
  color:#fff;
  border:1px solid var(--borda);
  padding:4px;
  border-radius:4px;
  width:50px;
  text-align:center;
}

footer{
  margin-top:20px;
}

footer button{
  width:100%;
  padding:12px;
  font-size:16px;
}

/* MENU */
.topo{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.hamburguer{
  display:none;
  background:none;
  border:none;
  font-size:26px;
  color:var(--amarelo);
  cursor:pointer;
}

#menu{
  display:flex;
  gap:8px;
}

@media (max-width:768px){
  .hamburguer{ display:block; }
  #menu{
    position:absolute;
    top:60px;
    right:20px;
    background:var(--preto80);
    flex-direction:column;
    padding:10px;
    border-radius:8px;
    display:none;
  }
  #menu.active{ display:flex; }
}
</style>
</head>

<body>

<header class="topo">
  <h1>üì¶ Contagem Softs</h1>
  <button class="hamburguer" onclick="toggleMenu()">‚ò∞</button>
  <nav id="menu">
    <a href="contagemsoft.html">ü•§ Softs</a>
    <a href="contagemdestilados.html">üç∏ Destilados</a>
    <a href="contagemvinhos.html">üç∑ Vinhos</a>
    <a href="index.html">‚¨Ö Voltar</a>
  </nav>
</header>

<table>
  <thead>
    <tr>
      <th>Item</th>
      <th>M√≠nimo</th>
      <th>Estoque</th>
      <th>Bar</th>
      <th>Pedido</th>
    </tr>
  </thead>
  <tbody id="tbody"></tbody>
</table>

<footer>
  <button id="exportar">üìÑ Exportar Contagem</button>
</footer>

<script>
/* ================= CONFIG ================= */
const STORAGE_KEY = "biergarten_contagem_softs";

/* ================= ITENS ================= */
const itens = [
  { nome:"√Ågua com G√°s 500ml", minimo:12, pack:12 },
  { nome:"√Ågua sem G√°s 500ml", minimo:12, pack:12 },
  { nome:"Coca-Cola 350ml", minimo:12, pack:12 },
  { nome:"Coca-Cola Zero 350ml", minimo:6, pack:6 },
  { nome:"Guaran√° 350ml", minimo:6, pack:12 },
  { nome:"Guaran√° Zero 350ml", minimo:6, pack:6 },
  { nome:"H2O Lim√£o 500ml", minimo:12, pack:12 },
  { nome:"H2O Limoneto 500ml", minimo:12, pack:12 },
  { nome:"Red Bull Tradicional 250ml", minimo:6, pack:4 },
  { nome:"Red Bull Tropical 250ml", minimo:4, pack:4 },
  { nome:"Red Bull Zero 250ml", minimo:4, pack:4 },
  { nome:"Schweppes Citrus 350ml", minimo:6, pack:6 },
  { nome:"Sprite 350ml", minimo:6, pack:6 },
  { nome:"Fanta Laranja 350ml", minimo:6, pack:6 },
  { nome:"T√¥nica Schweppes 350ml", minimo:6, pack:6 },
  { nome:"T√¥nica Zero Schweppes 350ml", minimo:6, pack:6 },
  { nome:"√Ågua Perrier 350ml", minimo:1, pack:6 },
  { nome:"Acqua Panna", minimo:1, pack:6 },
  { nome:"San Pellegrino", minimo:1, pack:6 },
  { nome:"Cerveja Long Neck", minimo:1, pack:6 },
  { nome:"Heineken Zero 355ml", minimo:24, pack:6 },
  { nome:"Stella Artois Gold 355ml", minimo:24, pack:6 },
  { nome:"Stella Artois 355ml", minimo:24, pack:6 },
  { nome:"Caf√© Leggero ou Finezzo", minimo:3, pack:10 },
  { nome:"Caf√© Descafeinado", minimo:1, pack:10 },
  { nome:"Caf√© Ristretto", minimo:3, pack:10 },
  { nome:"Refrigerante 2L Coca-Cola", minimo:2, pack:6 },
  { nome:"Refrigerante 2L Guaran√°", minimo:2, pack:6 },
  { nome:"Refrigerante 2L Brahma", minimo:2, pack:6 },
  { nome:"Ch√° Frutas Vermelhas", minimo:1, pack:10 },
  { nome:"Ch√° Frutas Silvestres", minimo:1, pack:10 },
  { nome:"Ch√° Camomila", minimo:1, pack:10 },
  { nome:"Ch√° Hortel√£", minimo:1, pack:10 },
  { nome:"Ch√° Preto", minimo:1, pack:10 },
  { nome:"Ch√° Verde", minimo:1, pack:10 },
  { nome:"Ch√° Branco", minimo:1, pack:10 },
  { nome:"Suco Maguary Abacaxi 500ml", minimo:4, pack:10 },
  { nome:"Leite de Coco Ducoco 200ml", minimo:8, pack:10 },
  { nome:"Leite Condensado 395g", minimo:4, pack:10 },
  { nome:"Canudo Mexedor", minimo:3, pack:10 },
  { nome:"Canudo Flex√≠vel", minimo:4, pack:10 },
  { nome:"Copo Descart√°vel 500ml", minimo:2, pack:10 },
  { nome:"Copo Descart√°vel 200ml", minimo:2, pack:10 },
  { nome:"C√°psula de Chantilly", minimo:1, pack:10 },
  { nome:"Cereja", minimo:1, pack:10 },
  { nome:"Emulsificante 200g", minimo:1, pack:10 },
  { nome:"Palito para Caf√©", minimo:1, pack:10 },
  { nome:"Coco Queimado", minimo:1, pack:10 },
  { nome:"A√ß√∫car 1kg", minimo:10, pack:10 },
  { nome:"Suco de Uva 3L", minimo:4, pack:6 },
  { nome:"Esponja para Copos", minimo:3, pack:3 },
  { nome:"P√™ssego em Calda 850g", minimo:1, pack:10 }
];

/* ================= ESTADO ================= */
const estado = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};

itens.forEach(item=>{
  if(!estado[item.nome]){
    estado[item.nome] = { estoque:0, bar:0 };
  }
});

const tbody = document.getElementById("tbody");

/* ================= FUN√á√ïES ================= */
function salvarEstado(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(estado));
}

function render(){
  tbody.innerHTML = "";

  itens.forEach(item=>{
    const e = estado[item.nome];
    const total = e.estoque + e.bar;
    const pedido = Math.max(item.minimo - total, 0);

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td class="nome">${item.nome}</td>
      <td>${item.minimo}</td>

      <td>
        <div class="acoes">
          <button onclick="alt('${item.nome}','estoque',-1)">-1</button>
          <button onclick="alt('${item.nome}','estoque',-${item.pack})">üì¶</button>
          <input value="${e.estoque}" 
            onchange="setValor('${item.nome}','estoque',this.value)">
          <button onclick="alt('${item.nome}','estoque',${item.pack})">üì¶</button>
          <button onclick="alt('${item.nome}','estoque',1)">+1</button>
        </div>
      </td>

      <td>
        <div class="acoes">
          <button onclick="alt('${item.nome}','bar',-1)">-1</button>
          <button onclick="alt('${item.nome}','bar',-${item.pack})">üì¶</button>
          <input value="${e.bar}" 
            onchange="setValor('${item.nome}','bar',this.value)">
          <button onclick="alt('${item.nome}','bar',${item.pack})">üì¶</button>
          <button onclick="alt('${item.nome}','bar',1)">+1</button>
        </div>
      </td>

      <td>${pedido}</td>
    `;
    tbody.appendChild(tr);
  });
}

window.alt = (nome,tipo,valor)=>{
  estado[nome][tipo] = Math.max(0, estado[nome][tipo] + valor);
  salvarEstado();
  render();
};

window.setValor = (nome,tipo,valor)=>{
  const v = parseInt(valor);
  estado[nome][tipo] = isNaN(v) || v < 0 ? 0 : v;
  salvarEstado();
  render();
};

/* ================= EXPORTAR ================= */
document.getElementById("exportar").onclick = ()=>{
  let csv = "Item;Minimo;Estoque;Bar;Pedido;Sugestao (Packs)\n";

  itens.forEach(item=>{
    const e = estado[item.nome];
    const pedido = Math.max(item.minimo - (e.estoque + e.bar), 0);
    const sugestaoPack = (pedido / item.pack).toFixed(1);

    csv += `${item.nome};${item.minimo};${e.estoque};${e.bar};${pedido};${sugestaoPack}\n`;
  });

  const blob = new Blob(["\ufeff"+csv],{type:"text/csv;charset=utf-8"});
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "contagem_softs.csv";
  link.click();

  /* LIMPA SOMENTE DEPOIS DE EXPORTAR */
  localStorage.removeItem(STORAGE_KEY);
  itens.forEach(i=>{
    estado[i.nome] = { estoque:0, bar:0 };
  });
  render();
};

function toggleMenu(){
  document.getElementById("menu").classList.toggle("active");
}

render();
</script>

</body>
</html>
