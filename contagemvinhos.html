<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Biergarten | Contagem Vinhos</title>

<style>
:root{
  --amarelo:#F4C430;
  --preto:#1a1a1a;
  --preto80:#262626;
  --borda:#444;
}

body{
  background:var(--preto);
  color:#fff;
  font-family:Arial, sans-serif;
  padding:20px;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

header h1{ color:var(--amarelo); margin:0; }

header a{
  background:var(--amarelo);
  color:#000;
  padding:8px 12px;
  border-radius:6px;
  text-decoration:none;
  font-weight:bold;
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:12px;
}

th, td{
  border:1px solid var(--borda);
  padding:6px;
  text-align:center;
}

th{
  background:var(--amarelo);
  color:#000;
}

td.nome{
  text-align:left;
  font-weight:bold;
}

button{
  background:var(--amarelo);
  border:none;
  padding:4px 8px;
  border-radius:4px;
  cursor:pointer;
  font-weight:bold;
}

.acoes{
  display:flex;
  gap:4px;
  justify-content:center;
  align-items:center;
}

input[type=number] {
  background: #333;
  color: #fff;
  border: 1px solid var(--borda);
  padding: 4px;
  border-radius: 4px;
  width: 50px;
  text-align: center;
}

/* Remove setas do input */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

footer{
  margin-top:20px;
}

footer button{
  width:100%;
  padding:12px;
  font-size:16px;
}
</style>
</head>

<body>

<header>
    <h1>ğŸ“¦ Contagem de Vinhos & Espumantes</h1>

  <div class="acoes-topo" id="menu">
    
    <a href="contagemsoft.html">ğŸ¥¤ Softs</a>
    <a href="contagemdestilados.html">ğŸ¸ Destilados</a>
    <a href="contagemvinhos.html">ğŸ· Vinhos</a>
    <a href="index.html">â¬… Voltar</a>
  </div>
</header>

<table id="tabela">
  <thead>
    <tr>
      <th>Item</th>
      <th>MÃ­nimo</th>
      <th>Estoque</th>
      <th>Bar</th>
      <th>Pedido</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<footer>
  <button id="exportar">ğŸ“„ Exportar Contagem</button>
</footer>

<script>
/* ğŸ”¢ ITENS */
const itens = [
  { nome:"Salton Series Brut", minimo:6 },
  { nome:"Dom Moscatel", minimo:4 },
  { nome:"Dom Brut", minimo:3 },
  { nome:"Nero Celebration Brut", minimo:3 },
  { nome:"Casa Valduga RosÃ©", minimo:2 },
  { nome:"Cave Amadeu Brut", minimo:6 },
  { nome:"Cave Geisse Brut", minimo:6 },
  { nome:"Ferrari Maximum Brut", minimo:2 },
  { nome:"Veuve Ambal Brut", minimo:4 },
  { nome:"MoÃ«t & Chandon Brut", minimo:3 },
  { nome:"Veuve Clicquot", minimo:3 },
  { nome:"Casa Valduga Gran Chardonnay", minimo:4 },
  { nome:"Minhadega Vinho Verde", minimo:3 },
  { nome:"Casalinho Alvarinho", minimo:3 },
  { nome:"Monte Estrela", minimo:2 },
  { nome:"Casa Valduga Terroir", minimo:6 },
  { nome:"Brisa Sauvignon Blanc", minimo:6 },
  { nome:"Anubis Susana Balbo Chardonnay", minimo:3 },
  { nome:"Cartuxa Ã‰vora Branco", minimo:4 },
  { nome:"Lidio Carrara Faces Chardonnay", minimo:2 },
  { nome:"Regia Colheita Reserva Branco", minimo:2 },
  { nome:"Miraval Cotes de Provence", minimo:3 },
  { nome:"TrÃªs Maria Vinho Verde RosÃ©", minimo:3 },
  { nome:"Luiz Argenta Jovem RosÃ©", minimo:2 },
  { nome:"Casa Valduga Pinot Noir", minimo:3 },
  { nome:"Manz Platonico", minimo:2 },
  { nome:"Punti Ferrer Carmenere", minimo:3 },
  { nome:"Punti Ferrer Cabernet Sauvignon", minimo:0 },
  { nome:"Camporsino Chianti", minimo:3 },
  { nome:"La Linda Malbec", minimo:3 },
  { nome:"MÃ³i Primitivo Puglia", minimo:3 },
  { nome:"Naturelle Tinto", minimo:3 },
  { nome:"Muros de Vinhas", minimo:2 },
  { nome:"Origen Cabernet Sauvignon", minimo:2 },
  { nome:"Origen Merlot", minimo:2 },
  { nome:"Piatelli Reserva Malbec", minimo:3 },
  { nome:"Montes Alpha CarmÃ©nÃ¨re", minimo:2 },
  { nome:"Caladessa Syrah Reserva", minimo:2 },
  { nome:"Luigi Bosca Malbec", minimo:2 },
  { nome:"Brunello Caprili", minimo:2 },
  { nome:"Cartuxa Ã‰vora Tinto", minimo:2 },
  { nome:"Barolo Del Comune di Serralunga D'Alba", minimo:2 },
  { nome:"Dom Melchor", minimo:1 },
  { nome:"Casa Silva Pinot Noir", minimo:3 },
  { nome:"Dos Fincas", minimo:3 },
  { nome:"Pizzato Merlot", minimo:2 },
  { nome:"Chateau La Tour Carnet Haut-MÃ©doc", minimo:2 },
  { nome:"Chateau Castegens", minimo:2 },
  { nome:"Vinho do Porto / Porto Cais", minimo:1 },
  { nome:"Vinho Tinto Entre Portas", minimo:2 },
  { nome:"Vinho Branco Entre Portas", minimo:1 }
];

const estado = {};
const caixaPadrao = 6; // PadrÃ£o para vinhos
const tbody = document.querySelector("tbody");

function render(){
  tbody.innerHTML = "";

  itens.forEach(item => {
    estado[item.nome] ??= { estoque: 0, bar: 0 };

    const total = estado[item.nome].estoque + estado[item.nome].bar;
    const pedido = Math.max(item.minimo - total, 0);

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td class="nome">${item.nome}</td>
      <td>${item.minimo}</td>
      <td>
        <div class="acoes">
          <button onclick="alt('${item.nome}','estoque',-1)">-1</button>
          <button onclick="alt('${item.nome}','estoque',-${caixaPadrao})">ğŸ“¦</button>
          <input type="number" min="0" value="${estado[item.nome].estoque}" onchange="setValor('${item.nome}','estoque',this.value)">
          <button onclick="alt('${item.nome}','estoque',${caixaPadrao})">ğŸ“¦</button>
          <button onclick="alt('${item.nome}','estoque',1)">+1</button>
        </div>
      </td>
      <td>
        <div class="acoes">
          <button onclick="alt('${item.nome}','bar',-1)">-1</button>
          <button onclick="alt('${item.nome}','bar',-${caixaPadrao})">ğŸ“¦</button>
          <input type="number" min="0" value="${estado[item.nome].bar}" onchange="setValor('${item.nome}','bar',this.value)">
          <button onclick="alt('${item.nome}','bar',${caixaPadrao})">ğŸ“¦</button>
          <button onclick="alt('${item.nome}','bar',1)">+1</button>
        </div>
      </td>
      <td>${pedido}</td>
    `;
    tbody.appendChild(tr);
  });
}

window.alt = (nome, tipo, valor) => {
  estado[nome][tipo] = Math.max(0, estado[nome][tipo] + valor);
  render();
};

window.setValor = (nome, tipo, valor) => {
  const v = parseInt(valor);
  estado[nome][tipo] = isNaN(v) || v < 0 ? 0 : v;
  render();
};

/* ğŸ“Š EXPORTAR */
document.getElementById("exportar").onclick = () => {
  let csv = "Item;Minimo;Estoque;Bar;Pedido\n";

  itens.forEach(item => {
    const total = estado[item.nome].estoque + estado[item.nome].bar;
    const pedido = Math.max(item.minimo - total, 0);
    csv += `${item.nome};${item.minimo};${estado[item.nome].estoque};${estado[item.nome].bar};${pedido}\n`;
  });

  const blob = new Blob(["\ufeff" + csv], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement("a");
  const data = new Date().toLocaleDateString().replace(/\//g, '-');
  
  link.setAttribute("href", url);
  link.setAttribute("download", `contagem_vinhos_${data}.csv`);
  link.click();
};

render();
</script>

</body>
</html>
